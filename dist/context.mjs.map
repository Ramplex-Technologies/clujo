{"version":3,"sources":["../src/context.ts"],"sourcesContent":["export class Context<T extends object> {\n  private object!: { initial: object | undefined } & T;\n  private updateQueue: Promise<void>;\n\n  constructor(initialObject?: object) {\n    this.reset(initialObject);\n    this.updateQueue = Promise.resolve();\n  }\n\n  public get value(): { initial: object | undefined } & T {\n    return this.object;\n  }\n\n  public reset(initialObject?: object): void {\n    if (initialObject) {\n      this.object = { initial: { ...initialObject } } as { initial: object | undefined } & T;\n    } else {\n      this.object = { initial: undefined } as { initial: object | undefined } & T;\n    }\n  }\n\n  update<NewValue extends object>(updateValue: NewValue): Promise<void> {\n    this.updateQueue = this.updateQueue.then(() => {\n      this.object = { ...this.object, ...updateValue };\n      return Promise.resolve();\n    });\n    return this.updateQueue;\n  }\n}\n"],"mappings":";AAAO,IAAM,UAAN,MAAgC;AAAA,EAIrC,YAAY,eAAwB;AAClC,SAAK,MAAM,aAAa;AACxB,SAAK,cAAc,QAAQ,QAAQ;AAAA,EACrC;AAAA,EAEA,IAAW,QAA6C;AACtD,WAAO,KAAK;AAAA,EACd;AAAA,EAEO,MAAM,eAA8B;AACzC,QAAI,eAAe;AACjB,WAAK,SAAS,EAAE,SAAS,EAAE,GAAG,cAAc,EAAE;AAAA,IAChD,OAAO;AACL,WAAK,SAAS,EAAE,SAAS,OAAU;AAAA,IACrC;AAAA,EACF;AAAA,EAEA,OAAgC,aAAsC;AACpE,SAAK,cAAc,KAAK,YAAY,KAAK,MAAM;AAC7C,WAAK,SAAS,EAAE,GAAG,KAAK,QAAQ,GAAG,YAAY;AAC/C,aAAO,QAAQ,QAAQ;AAAA,IACzB,CAAC;AACD,WAAO,KAAK;AAAA,EACd;AACF;","names":[]}